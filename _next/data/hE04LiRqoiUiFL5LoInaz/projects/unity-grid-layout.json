{"pageProps":{"slug":"/projects/unity-grid-layout","title":"Unity grid layout","description":"","status":"published","tags":["Unity","C#"],"banner":{"src":"","description":""},"ast":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Unity grid layout"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://unity.com/"},"children":[{"type":"text","value":"Unity"}]},{"type":"text","value":" beschikt over minstens 3 officiële systemen voor het maken van grafische interfaces."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Immediate Mode GUI (IMGUI)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Unity UI"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"UI Toolkit"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In eerste instantie was enkel IMGUI beschikbaar. Hierbij wordt de structuur van de interface volledig geschreven in code. De volgende code resulteert bijvoorbeeld in een menu waarbij twee knoppen onder elkaar worden getekend: \"Start\" en \"Exit\"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-C#"]},"children":[{"type":"element","tagName":"span","properties":{"className":["hljs-function"]},"children":[{"type":"element","tagName":"span","properties":{"className":["hljs-keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-title"]},"children":[{"type":"text","value":"OnGUI"}]},{"type":"text","value":"()"}]},{"type":"text","value":"\n{\n  GUILayout.BeginVertical();\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-keyword"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" (GUILayout.Button("},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"Start\""}]},{"type":"text","value":"))\n  {\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-comment"]},"children":[{"type":"text","value":"// ..."}]},{"type":"text","value":"\n  }\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-keyword"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" (GUILayout.Button("},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"Exit\""}]},{"type":"text","value":"))\n  {\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-comment"]},"children":[{"type":"text","value":"// ..."}]},{"type":"text","value":"\n  }\n  GUILayout.EndVertical();\n}\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Deze manier van het opbouwen van een interface is niet bepaald gebruiksvriendelijk. Zeker als de persoon die zich over het ontwerpen van de interface ontfermt minder ervaring heeft met programmeren. Daarnaast moet de code steeds opnieuw worden gecompileerd om het resultaat te kunnen zien."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Later is hier een alternatief voor geïntroduceerd in de vorm van Unity UI. Ontwerpers kunnen hierbij direct het resultaat zien. Ook kan deze interface in de 3D wereld worden geplaatst voor meer immersie."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Daarnaast biedt het de mogelijkheid om afmeting en positie relatief aan de beschikbare ruimte te specificeren. Sommige componenten doen dit automatisch voor de ontwerper op basis van een aantal opties. Dit maakt het makkelijker om een interface te maken die geschikt is voor meerdere resoluties. Dit betreft onder meer:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"LayoutElement"}]},{"type":"text","value":" voor het aangeven van de minimale en gewenste grootte (en hoe de overige ruimte dient te worden verdeeld)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"HorizontalLayoutGroup"}]},{"type":"text","value":" en "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"VerticalLayoutGroup"}]},{"type":"text","value":" plaatsen respectievelijk de elementen naast en onder elkaar. De gewenste afmetingen worden hierbij zoveel mogelijk gerespecteerd."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://docs.unity3d.com/Packages/com.unity.ugui@1.0/api/UnityEngine.UI.GridLayoutGroup.html"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"GridLayoutGroup"}]}]},{"type":"text","value":" plaatst de componenten in een raster waarbij kan worden aangegeven hoe groot de cellen zijn. Iedere cel krijgt precies die ruimte toegewezen; waardes van een "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"LayoutElement"}]},{"type":"text","value":" worden volledig genegeerd."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Omdat "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"GridLayoutGroup"}]},{"type":"text","value":" absolute waarden gebruikt voor de breedte en hoogte van de cellen, is het component vrij gelimiteerd in welke context het zinnig kan worden gebruikt."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Met behulp van een aantal "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"VerticalLayoutGroup"}]},{"type":"text","value":" in een "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"HorizontalLayoutGroup"}]},{"type":"text","value":" (of vice versa) kan een flexibel raster worden opgebouwd; bijvoorbeeld een tabel. Een nadeel van deze oplossing is dat een kolom/rij de neiging heeft om er gekarteld uit te zien als er geen specifieke stappen zijn genomen dit tegen te gaan."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"/unity/grid/horizontal-and-vertical-layout-groups.svg","alt":"\"Raster\" waarbij de cellen in een rij variëren in hoogte"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Om deze ongemakken te verhelpen heb ik een component geschreven dat berekent hoe breed/hoog een kolom/rij minimaal en idealiter hoort te zijn (het totaal vormt de afmetingen van het raster zelf): "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"FlexibleGridLayoutGroup"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Werking"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Het aantal rijen wordt berekend op basis van het aantal \"kinderen\" en het gewenste aantal kolommen."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Voor iedere kolom wordt de minimale, gewenste en flexibele breedte van alle cellen in de betreffende kolom geïnventariseerd. De hoogste waardes worden gebruikt voor de breedte van de betreffende kolom. De minimale, gewenste en totale breedte van het raster is het totaal plus eventuele ruimte tussen cellen."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Hetzelfde wordt gedaan voor de hoogte van de rijen, en daarmee de hoogte van het raster."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Het raster krijgt een breedte toegekend, en berekend op basis daarvan hoeveel ruimte iedere kolom uiteindelijk krijgt toebedeeld."},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Iedere kolom krijgt de eerder berekende minimale breedte van de kolom in kwestie toegewezen."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Kolommen krijgen, zover beschikbaar, extra ruimte toebedeeld tot zij hun gewenste breedte hebben bereikt. De verdeling is gebaseerd op het aandeel dat de gewenste breedte van een kolom heeft op de totaal gewenste breedte van alle kolommen, ten opzichte van de minimale breedte."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Eventueel overgebleven ruimte wordt verdeeld op basis van de flexibele breedtes van de kolommen."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Iedere cell in de betreffende kolom krijgt een breedte toegewezen en een x-positie op basis van de totale breedte van alle voorafgaande kolommen (en ruimte daartussen)."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Hetzelfde wordt gedaan voor de hoogtes van de rijen."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"FlexibleGridLayoutGroup"}]},{"type":"text","value":" is zeer geschikt voor contexts waarbij de afmetingen van de content leidend zijn. Denk hierbij bijvoorbeeld aan een tabel."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Daarnaast is het ook goed te gebruiken in situaties waarbij iedere kolom/rij even groot hoort te zijn, maar het wel wenselijk is dat de beschikbare ruimte zoveel mogelijk wordt benut. Afhankelijk van de componenten in kwestie kan dit soms iets meer werk geven."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Potentiële verbeteringen"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hoewel "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"FlexibleGridLayoutGroup"}]},{"type":"text","value":" doet waar het voor ontworpen is, is er ruimte voor een aantal \"verbeteringen\". In verschillende gevallen is het echter mogelijk om een vergelijkbaar effect te realiseren met wat er al is; vaak is dat wel omslachtiger. Derhalve hebben deze verbeteringen geen prioriteit. Verbeteringen waar aan zou kunnen worden gedacht zijn:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Ondersteuning bieden voor cellen splitsen/samenvoegen."},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Een "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"…LayoutGroup"}]},{"type":"text","value":" in een cell plaatsen geeft een vergelijkbaar effect."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Optie bieden om een aantal rijen te specificeren in plaats van het aantal kolommen."},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Door de elementen in een andere volgorde te plaatsen, en het aantal kolommen af te leiden van het gewenste aantal rijen, kan dit met de bestaande opties al worden gerealiseerd."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]}]}},"__N_SSG":true}